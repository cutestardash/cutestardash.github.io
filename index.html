<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>‚≠ê Cute Star Dash ‚≠ê</title>

<style>
body {
  margin: 0;
  background: radial-gradient(circle at top, #ffd6ff, #ccefff);
  font-family: Arial, sans-serif;
  font-weight: bold;
  overflow: hidden;
}

canvas {
  background: white;
  border-radius: 20px;
  box-shadow: 0 25px 50px rgba(0,0,0,0.3);
  display: block;
  margin: auto;
  margin-top: 60px;
}

/* UI */
.banner {
  position: fixed;
  top: 10px;
  left: 10px;
  background: #ff4fd8;
  color: white;
  padding: 6px 14px;
  border-radius: 14px;
  font-size: 12px;
}

.topUI {
  position: fixed;
  top: 10px;
  right: 10px;
}

.topUI button {
  padding: 8px 14px;
  border-radius: 14px;
  border: none;
  background: #6bcfff;
  color: white;
  font-weight: bold;
}

/* Inventory */
.inventory {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: none;
  justify-content: center;
  align-items: center;
}

.inventoryBox {
  background: white;
  width: 300px;
  border-radius: 20px;
  padding: 15px;
  text-align: center;
}

.ball {
  font-size: 22px;
  margin: 4px;
}

.perkBtn {
  margin: 5px;
  padding: 6px 10px;
  border-radius: 12px;
  border: none;
  background: #ffb347;
}

/* Start screen */
.startScreen {
  position: fixed;
  inset: 0;
  background: linear-gradient(#ffccff, #ccf2ff);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 10;
}

.startScreen input, .startScreen button {
  padding: 10px;
  border-radius: 14px;
  border: none;
  margin: 6px;
}

/* D-pad */
.controls {
  position: fixed;
  bottom: 20px;
  right: 20px;
  display: grid;
  grid-template-columns: 50px 50px 50px;
  gap: 6px;
}

.controls button {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: none;
  background: #6bcfff;
  font-size: 20px;
}
</style>
</head>

<body>

<div class="banner">üÜï NEW UPDATE!</div>

<div class="topUI">
  <button onclick="toggleInventory()">üéí INVENTORY</button>
</div>

<div class="startScreen" id="startScreen">
  <h2>‚≠ê Cute Star Dash ‚≠ê</h2>
  <input id="nameInput" placeholder="Enter name">
  <button onclick="startGame()">START</button>
</div>

<canvas id="game" width="480" height="480"></canvas>

<div class="controls">
  <div></div>
  <button onpointerdown="keys.up=true" onpointerup="keys.up=false">‚¨ÜÔ∏è</button>
  <div></div>
  <button onpointerdown="keys.left=true" onpointerup="keys.left=false">‚¨ÖÔ∏è</button>
  <button onpointerdown="keys.down=true" onpointerup="keys.down=false">‚¨áÔ∏è</button>
  <button onpointerdown="keys.right=true" onpointerup="keys.right=false">‚û°Ô∏è</button>
</div>

<div class="inventory" id="inventory">
  <div class="inventoryBox">
    <h3>üéí Inventory</h3>
    <p id="coins"></p>
    <div id="balls"></div>
    <h4>Perks</h4>
    <button class="perkBtn" onclick="killEnemy()">üí• Kill Enemy (20)</button>
    <button class="perkBtn" onclick="speedBoost()">‚ö° Speed (15)</button>
    <button class="perkBtn" onclick="shield()">üõ° Shield (25)</button>
    <br><br>
    <button onclick="toggleInventory()">Close</button>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let keys = {up:false,down:false,left:false,right:false};
let name="", started=false;

let player = {x:240,y:240,r:14,speed:4,color:"#6bcfff",shield:false};
let stars=[], enemies=[];
let score=0, level=1, nextBall=10;

let balls = JSON.parse(localStorage.getItem("balls")||"[]");
let coins = score;

const colors = ["#ff69b4","#8a2be2","#00fa9a","#ffa500","#1e90ff"];
const galaxy = "üåå";

function startGame(){
  name = document.getElementById("nameInput").value.trim();
  if(!name) return alert("Enter name");
  document.getElementById("startScreen").style.display="none";
  started=true;
}

function toggleInventory(){
  const inv=document.getElementById("inventory");
  inv.style.display = inv.style.display==="flex"?"none":"flex";
  renderInventory();
}

function spawnStar(){stars.push({x:Math.random()*440+20,y:Math.random()*440+20,r:8});}
function spawnEnemy(){enemies.push({x:Math.random()*440+20,y:Math.random()*440+20,r:14,vx:(Math.random()-0.5)*2,vy:(Math.random()-0.5)*2});}

spawnStar(); spawnEnemy();

function update(){
  if(!started) return;

  if(keys.up) player.y-=player.speed;
  if(keys.down) player.y+=player.speed;
  if(keys.left) player.x-=player.speed;
  if(keys.right) player.x+=player.speed;

  player.x=Math.max(player.r,Math.min(480-player.r,player.x));
  player.y=Math.max(player.r,Math.min(480-player.r,player.y));

  stars.forEach((s,i)=>{
    if(Math.hypot(player.x-s.x,player.y-s.y)<player.r+s.r){
      stars.splice(i,1);
      score++; coins=score;
      spawnStar();

      if(score>=nextBall){
        if(score===100){balls.push(galaxy);}
        else balls.push(colors[balls.length%colors.length]);
        player.color=balls.at(-1);
        localStorage.setItem("balls",JSON.stringify(balls));
        nextBall+=10;
      }
    }
  });

  enemies.forEach((e,i)=>{
    e.x+=e.vx; e.y+=e.vy;
    if(Math.hypot(player.x-e.x,player.y-e.y)<player.r+e.r){
      if(player.shield){player.shield=false; enemies.splice(i,1);}
      else alert("üíÄ Game Over\n"+name+" scored "+score), location.reload();
    }
  });
}

function draw(){
  ctx.clearRect(0,0,480,480);

  stars.forEach(s=>{ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,7);ctx.fillStyle="#ffd700";ctx.fill();});
  enemies.forEach(e=>{ctx.beginPath();ctx.arc(e.x,e.y,e.r,0,7);ctx.fillStyle="red";ctx.fill();});
  ctx.beginPath();ctx.arc(player.x,player.y,player.r,0,7);
  ctx.fillStyle=player.color; ctx.fill();

  ctx.fillStyle="#333";
  ctx.fillText("‚≠ê "+score,10,20);
}

function loop(){update();draw();requestAnimationFrame(loop);}
loop();

/* PERKS */
function killEnemy(){ if(coins>=20&&enemies.length){coins-=20; enemies.pop();}}
function speedBoost(){ if(coins>=15){coins-=15; player.speed=6; setTimeout(()=>player.speed=4,3000);}}
function shield(){ if(coins>=25){coins-=25; player.shield=true;}}

function renderInventory(){
  document.getElementById("coins").textContent="Coins: "+coins;
  document.getElementById("balls").innerHTML=balls.map(b=>`<span class="ball">${b==="üåå"?b:"‚óè"}</span>`).join("");
}
</script>

</body>
</html>
